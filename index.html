<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zaawansowany System Analizy Mecz√≥w i Value Bet√≥w</title>
    <!-- Poprzednie style CSS pozostajƒÖ bez zmian -->
    <style>
        /* Dodatkowe style dla nowych element√≥w */
        .analysis-factors {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .factor-card {
            background: rgba(33, 150, 243, 0.1);
            padding: 15px;
            border-radius: 5px;
            text-align: left;
        }

        .factor-score {
            font-weight: bold;
            color: var(--success-color);
        }

        .prediction-confidence {
            font-size: 1.2em;
            margin: 10px 0;
            padding: 10px;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 5px;
        }

        .market-analysis {
            margin-top: 15px;
            padding: 10px;
            background: rgba(33, 150, 243, 0.05);
            border-radius: 5px;
        }

        .market-item {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid var(--primary-color);
        }

        .weather-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .player-stats {
            margin: 10px 0;
        }

        .team-form {
            display: flex;
            gap: 5px;
            margin: 5px 0;
        }

        .form-indicator {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8em;
        }

        .win { background-color: var(--success-color); }
        .draw { background-color: var(--warning-color); }
        .loss { background-color: var(--danger-color); }
    </style>
</head>
<body>
    <!-- Poprzednia struktura HTML pozostaje, dodajemy nowe elementy -->
    <div class="container">
        <header class="header">
            <h1>üéØ Zaawansowany System Analizy Mecz√≥w</h1>
        </header>

        <div class="control-panel">
            <div class="control-card">
                <h2>üìÖ Wyb√≥r daty</h2>
                <input type="date" id="dateSelect" class="date-input">
                <select id="sportFilter" class="select-input">
                    <option value="soccer">‚öΩ Pi≈Çka no≈ºna</option>
                    <option value="basketball">üèÄ Koszyk√≥wka</option>
                    <option value="icehockey">üèí Hokej</option>
                </select>
                <button onclick="analyzeMatches()" class="btn">Analizuj</button>
            </div>

            <div class="control-card">
                <h2>‚öôÔ∏è Filtry analizy</h2>
                <select id="analysisDepth" class="select-input">
                    <option value="basic">Podstawowa analiza</option>
                    <option value="advanced">Zaawansowana analiza</option>
                    <option value="full">Pe≈Çna analiza</option>
                </select>
                <select id="marketType" class="select-input">
                    <option value="all">Wszystkie rynki</option>
                    <option value="1x2">1X2</option>
                    <option value="goals">Gole</option>
                    <option value="cards">Kartki</option>
                    <option value="corners">Rzuty ro≈ºne</option>
                    <option value="specials">Specjalne</option>
                </select>
            </div>

            <div class="control-card">
                <h2>üìä Statystyki systemu</h2>
                <div id="systemStats" class="stats-container">
                    <div class="stat-item">
                        <div>Skuteczno≈õƒá</div>
                        <div id="successRate">0%</div>
                    </div>
                    <div class="stat-item">
                        <div>ROI</div>
                        <div id="roiValue">0%</div>
                    </div>
                </div>
            </div>
        </div>

        <div id="loadingIndicator" class="loading" style="display: none;">
            ‚åõ Trwa zaawansowana analiza mecz√≥w...
        </div>

        <div id="matchesContainer" class="match-grid">
            <!-- Tutaj bƒôdƒÖ wy≈õwietlane analizowane mecze -->
        </div>
    </div>

    <script>
        class AdvancedMatchAnalyzer {
            constructor() {
                this.API_KEY = '631900acd2063f2fa684e2257dfa5588';
                this.BETCLIC_MARKETS = [
                    '1X2', 'Over/Under', 'Both Teams to Score',
                    'First Goal Time', 'Player Shots', 'Cards',
                    'Corners', 'Player Goals', 'Exact Score'
                ];
                this.weatherAPI = 'YOUR_WEATHER_API_KEY';
                this.statsAPI = 'YOUR_STATS_API_KEY';
            }

            async analyzeMatch(match) {
                const analysis = {
                    basic: await this.getBasicAnalysis(match),
                    advanced: await this.getAdvancedAnalysis(match),
                    weather: await this.getWeatherAnalysis(match),
                    players: await this.getPlayerAnalysis(match),
                    historical: await this.getHistoricalAnalysis(match),
                    valueBets: await this.findValueBets(match),
                    trapBets: await this.detectTrapBets(match)
                };

                return this.calculateFinalPrediction(analysis);
            }

            async getBasicAnalysis(match) {
                // Implementacja podstawowej analizy
                return {
                    homeForm: this.calculateTeamForm(match.home_team),
                    awayForm: this.calculateTeamForm(match.away_team),
                    h2h: await this.getH2HResults(match),
                    recentResults: this.getRecentResults(match)
                };
            }

            async getAdvancedAnalysis(match) {
                // Implementacja zaawansowanej analizy
                return {
                    expectedGoals: this.calculateExpectedGoals(match),
                    teamStrength: this.calculateTeamStrength(match),
                    playerAvailability: await this.checkPlayerAvailability(match),
                    tacticalAnalysis: this.analyzeTactics(match)
                };
            }

            async getWeatherAnalysis(match) {
                // Implementacja analizy pogody
                const weather = await this.fetchWeatherData(match);
                return this.analyzeWeatherImpact(weather, match);
            }

            async getPlayerAnalysis(match) {
                // Implementacja analizy zawodnik√≥w
                return {
                    keyPlayers: await this.analyzeKeyPlayers(match),
                    injuries: await this.checkInjuries(match),
                    form: await this.getPlayerForm(match)
                };
            }

            calculateConfidenceScore(analysis) {
                // Implementacja obliczania pewno≈õci typu
                let score = 0;
                const weights = {
                    basic: 0.3,
                    advanced: 0.3,
                    weather: 0.1,
                    players: 0.2,
                    historical: 0.1
                };

                // Obliczanie wa≈ºonego wyniku
                score += analysis.basic.confidence * weights.basic;
                score += analysis.advanced.confidence * weights.advanced;
                score += analysis.weather.impact * weights.weather;
                score += analysis.players.confidence * weights.players;
                score += analysis.historical.confidence * weights.historical;

                return score;
            }

            async findValueBets(match) {
                // Implementacja wyszukiwania value bet√≥w
                const marketOdds = await this.fetchMarketOdds(match);
                const valueOpportunities = [];

                for (const market of this.BETCLIC_MARKETS) {
                    const value = this.calculateValueBet(market, marketOdds);
                    if (value.exists) {
                        valueOpportunities.push(value);
                    }
                }

                return valueOpportunities;
            }

            detectTrapBets(match) {
                // Implementacja wykrywania pu≈Çapek bukmacherskich
                return {
                    suspiciousOdds: this.findSuspiciousOdds(match),
                    oddMovements: this.analyzeOddMovements(match),
                    marketDistortions: this.findMarketDistortions(match)
                };
            }

            calculateFinalPrediction(analysis) {
                // Implementacja ko≈Ñcowej predykcji
                const confidence = this.calculateConfidenceScore(analysis);
                const bestBets = this.selectBestBets(analysis.valueBets, confidence);

                return {
                    confidence,
                    bestBets,
                    analysis,
                    warnings: analysis.trapBets
                };
            }
        }

        // Inicjalizacja i obs≈Çuga interfejsu
        const analyzer = new AdvancedMatchAnalyzer();

        async function analyzeMatches() {
            const loadingIndicator = document.getElementById('loadingIndicator');
            const matchesContainer = document.getElementById('matchesContainer');
            const selectedDate = document.getElementById('dateSelect').value;
            const selectedSport = document.getElementById('sportFilter').value;
            const analysisDepth = document.getElementById('analysisDepth').value;

            try {
                loadingIndicator.style.display = 'block';
                matchesContainer.innerHTML = '';

                const matches = await fetchMatches(selectedDate, selectedSport);
                const analysisResults = [];

                for (const match of matches) {
                    const analysis = await analyzer.analyzeMatch(match);
                    analysisResults.push({ match, analysis });
                }

                // Sortowanie po pewno≈õci i wybranie najlepszych typ√≥w
                const bestPicks = analysisResults
                    .sort((a, b) => b.analysis.confidence - a.analysis.confidence)
                    .slice(0, 5);

                displayResults(bestPicks);
                updateSystemStats(analysisResults);

            } catch (error) {
                console.error('Error:', error);
                matchesContainer.innerHTML = `
                    <div class="error-message">
                        <p>‚ö†Ô∏è WystƒÖpi≈Ç b≈ÇƒÖd podczas analizy</p>
                        <p>Szczeg√≥≈Çy: ${error.message}</p>
                    </div>`;
            } finally {
                loadingIndicator.style.display = 'none';
            }
        }

        function displayResults(results) {
            const container = document.getElementById('matchesContainer');
            
            results.forEach(({ match, analysis }) => {
                const matchCard = createMatchCard(match, analysis);
                container.appendChild(matchCard);
            });
        }

        function createMatchCard(match, analysis) {
            const card = document.createElement('div');
            card.className = 'match-card';
            
            // Implementacja tworzenia karty meczu z wszystkimi analizami
            
            return card;
        }

        // Inicjalizacja przy za≈Çadowaniu strony
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('dateSelect').valueAsDate = new Date();
        });
    </script>
</body>
</html>
